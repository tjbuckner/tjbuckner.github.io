<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="jsformstyle.css">
    <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
    </head>
<body>
    <div class="container center" id="generator-panel">
<!--        <div class="well">-->
            <div class="panel panel-primary">
                <div class="panel-heading head">
                    <h1 class="panel-title">Create a Form:</h1>
                </div>
                <div id="textandbutton" class="panel-body">
                    <textarea id="ta_form" rows="10" cols="80">My Great Form

text,name,Name:,David
checkbox,human,Human:,ON
radio,sex,Sex:,Male,Female,Female
popup,city,City:,Knoxville,Asheville,Sedona,Asheville
button,submit,Submit Form</textarea>
                    <br />
                    <br />
    <!--                class="btn-lg btn-primary logo"-->
                    <button class="btn-lg btn-primary center-button" type="button" onclick="convert()">Convert to form!</button>
                    <br />
                    <br />
                </div>
        </div>
<!--            </div>-->
    </div>
        <div class="container invisible" id="form-panel">
<!--            <div class="well">-->
                <div class = "panel panel-primary">
                    <div class="panel-heading head">
                        <h1 class="panel-title" id="form-title"></h1>
                    </div>
                    <div class="panel-body">
                        <form id="newForm" role="form" class="form">

        <!--                    <fieldset id="newForm">-->
        <!--                        All the form code generated by jscript will go here.-->
        <!--                    </fieldset>-->

                        </form>
                    </div>
                </div>
<!--            </div>-->
        </div>
            
<!--        </div>-->
<!--</div>-->
    
<script>
    function convert(){        
        
        var arrayOfLines = $('#ta_form').val().split('\n');
//        console.log(arrayOfLines);
        
        var div = document.getElementById("newForm");
        
        var titleAssigned = false;
        
        if(!titleAssigned){
                var titleDiv = document.getElementById("form-title");
                
                titleDiv.appendChild(document.createTextNode(arrayOfLines[0,0]));
                
                titleAssigned = true;
        }
        
        for(i=0; i < arrayOfLines.length; i++){
            
            var split = arrayOfLines[i].split(",");
                
            //for text:
            //split[0,0] = text(text)
            //split[0,1] = item_name(name)
            //split[0,2] = label_title(Name:)
            //split[0,3] = default_value(David)
            if(split[i,0] == "text"){
                
                var textDiv = document.createElement("div");
                textDiv.setAttribute("class", "form-group");
                
                var text = document.createElement("input");
                text.setAttribute("type", "text");
                text.setAttribute("placeholder", split[0,3]);
                text.setAttribute("id", "text");
                
                var textlabel = document.createElement("label");
                textlabel.htmlFor = "text";
                textlabel.setAttribute("class", "col-sm-2 control-label");
                textlabel.appendChild(document.createTextNode
                                  (split[i,2]));
                
                textDiv.appendChild(textlabel);
                textDiv.appendChild(text);
                
                div.appendChild(textDiv);
                
            }
            
            //for checkbox:
            //split[0,0] = checkbox
            //split[0,1] = item_name
            //split[0,2] = label_title
            //split[0,3] = on/off (checked)
            if(split[i,0] == "checkbox"){
                
                console.log("CB!");
                
                var checkboxdiv = document.createElement("div");
                checkboxdiv.setAttribute("class", "form-group");
                
                var checkbox = document.createElement("input");
                checkbox.setAttribute("type", split[i,0]);
                checkbox.setAttribute("name", split[i,1]);
                checkbox.setAttribute("id", "cb");
//                checkbox.setAttribute("class", "form-control");
                
                if(split[i,3] == "ON"){
                    checkbox.setAttribute("checked", "true");
                }
                
                //generate label
                var label = document.createElement("label");
                label.setAttribute("class", "col-sm-2 control-label");
                label.htmlFor = "cb";
                label.appendChild(document.createTextNode
                                  (split[i,2] + " "));
                
                //put everything in its respective tags.
                checkboxdiv.appendChild(label);
                checkboxdiv.appendChild(checkbox);
                div.appendChild(checkboxdiv);
            }
            
            //for radio:
            //split[0,0] = radio
            //split[0,1] = group_name
            //split[0,2] = label_title
            //split[0,3] = title1
            //split[0,4] = title2, etc.
            //split[0,last] = default_value
            if(split[i,0] == "radio"){
                var numItems = split.length - 4;
                var reps = 3 + numItems;
                
                var radioDiv = document.createElement("div");
                radioDiv.setAttribute("class", "form-group");
                
                var radioGroupLabel = document.createElement("label");
                radioGroupLabel.htmlFor = 'radio';
                radioGroupLabel.appendChild(document.createTextNode(split[0,2]));
                radioGroupLabel.setAttribute("class", "col-sm-2 control-label");
                                            
                radioDiv.appendChild(radioGroupLabel);
                
                var radioGroup = document.createElement("div");
                    radioGroup.setAttribute("class", "btn-group");
                
                for (n=3; n<reps; n++){
                    var radio = document.createElement("input");
                    radio.setAttribute("type", "radio");
                    radio.setAttribute("value", split[i,n]);
                    radio.setAttribute("name", split[i,1]);
//                    radio.setAttribute("class", "form-control");
                    
                    if (split[i,split.length - 1] == split[i,n]){
                        radio.setAttribute("checked", "true");   
                    }
                    
                    var radioLabel = document.createElement("label");
                    radioLabel.htmlFor = 'radio';
//                    radioLabel.setAttribute("class", "col-sm-2 control-label");
                    radioLabel.appendChild(document.createTextNode('\u00A0' + split[i,n] + '\u00A0' + '\u00A0'));
                    
                    
                    
                    radioGroup.appendChild(radio);
                    radioGroup.appendChild(radioLabel);
                                           
                    radioDiv.appendChild(radioGroup);                
                    
                }
                
                div.appendChild(radioDiv);
            
                
                
            }
            
            
            //for popup:
            //split[0,0] = popup
            //split[0,1] = item_name
            //split[0,2] = label_title
            //split[0,3] = item_title1
            //split[0,4] = item_title2, etc.
            //split[0,last] = default_value
            if(split[i,0] == "popup"){
                
                //<field>
                var popupdiv = document.createElement("div");
                popupdiv.setAttribute("class", "form-group");
            
                //<select>
                var popup = document.createElement("select");
                
                var numItems = split.length - 4;
                var reps = 3 + numItems;
                  
                for(n=3; n<reps; n++){
                    //<option>
                    var opt = document.createElement("option");
                    opt.text = split[i,n];
                    popup.appendChild(opt);
                    
                    if(split[i,split.length - 1] == split[i,n]){
                        opt.setAttribute("selected", "true");
                    }
                }
                
                
                //<label>                
                var popupLabel = document.createElement("label");
                popupLabel.htmlFor = 'popup';
                popupLabel.setAttribute("class", "col-sm-2 control-label");
                popupLabel.appendChild(document.createTextNode(split[0,2])); 
                
                popupdiv.appendChild(popupLabel);
                popupdiv.appendChild(popup);
                div.appendChild(popupdiv);
                
            }
            
            //for button:
            //split[0,0] = button
            //split[0,1] = item_name
            //split[0,2] = label_title
            if(split[i,0] == "button"){
            
                console.log("BUTTON!");
                
                var buttondiv = document.createElement("div");
                buttondiv.setAttribute("class", "form-group");
                
                var button = document.createElement("button");
                button.setAttribute("type", "button");
                button.setAttribute("name", split[0,1]);
                button.setAttribute("value", "button");
                button.setAttribute("class", "btn-lg btn-primary center-button");
                
                var buttonLabel = document.createTextNode
                                  (split[i,2]);
                
                button.appendChild(buttonLabel);
                buttondiv.appendChild(button);
                div.appendChild(buttondiv);
                
            }
            
            
        }   
        
        var formPanel = document.getElementById("form-panel");
        formPanel.className = "container center";
        
        var genPanel = document.getElementById("generator-panel");
        genPanel.parentNode.removeChild(genPanel);
//        genPanel.className = "container invisible";
        
        
//        element.parentNode.removeChild(element);
    }
    
        
    
            
            
    
    
    
    </script> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    </body>

</html>